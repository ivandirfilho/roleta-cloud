# Roleta Cloud - Docker Compose
# Uso: docker-compose up -d

version: '3.8'

services:
  roleta-cloud:
    build: .
    container_name: roleta-cloud
    restart: unless-stopped
    ports:
      - "8765:8765"
    environment:
      - WS_HOST=0.0.0.0
      - WS_PORT=8765
      - SSL_ENABLED=false
      - AUTH_ENABLED=false
    volumes:
      # Persistir estado e logs
      - ./data:/app/data
      - ./logs:/app/logs
    healthcheck:
      test: [ "CMD", "python", "-c", "import socket; s=socket.socket(); s.connect(('localhost', 8765)); s.close()" ]
      interval: 30s
      timeout: 10s
      retries: 3
  # Futuro: Keycloak para autenticação
  # keycloak:
  #   image: quay.io/keycloak/keycloak:latest
  #   environment:
  #     - KEYCLOAK_ADMIN=admin
  #     - KEYCLOAK_ADMIN_PASSWORD=admin
  #   ports:
  #     - "8080:8080"
  #   command: start-dev

networks:
  default:
    name: roleta-network
